# RSS Summarizer v2 - Backup System

## üéØ –ü–æ–ª–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ–≥–æ —Ö—Ä–∞–Ω–µ–Ω–∏—è –∏ –ø–µ—Ä–µ–Ω–æ—Å–∞ —Å–µ—Ä–≤–∏—Å–∞

### ‚úÖ –ß—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

1. **üóÑÔ∏è –°–∫—Ä–∏–ø—Ç—ã —Ä–µ–∑–µ—Ä–≤–Ω–æ–≥–æ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è**
   - `scripts/backup.sh` - –ü–æ–ª–Ω–æ–µ —Ä–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ
   - `scripts/restore.sh` - –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–∑ —Ä–µ–∑–µ—Ä–≤–Ω–æ–π –∫–æ–ø–∏–∏

2. **üê≥ –£–ª—É—á—à–µ–Ω–Ω–∞—è Docker –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è**
   - –ò–º–µ–Ω–æ–≤–∞–Ω–Ω—ã–µ —Ç–æ–º–∞ –¥–ª—è –ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π restart –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
   - –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –¥–ª—è –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏—Ö –±—ç–∫–∞–ø–æ–≤ PostgreSQL

3. **‚öôÔ∏è Makefile –∫–æ–º–∞–Ω–¥—ã**
   - `make backup` - –°–æ–∑–¥–∞—Ç—å –ø–æ–ª–Ω—ã–π –±—ç–∫–∞–ø
   - `make restore BACKUP=file` - –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏–∑ –±—ç–∫–∞–ø–∞
   - `make export` / `make import` - –≠–∫—Å–ø–æ—Ä—Ç/–∏–º–ø–æ—Ä—Ç —Ç–æ–ª—å–∫–æ –¥–∞–Ω–Ω—ã—Ö
   - `make migration-prepare` - –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ –ø–µ—Ä–µ–Ω–æ—Å—É

4. **üìñ –ü–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**
   - `MIGRATION_GUIDE.md` - –ü–æ—à–∞–≥–æ–≤—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–µ—Ä–µ–Ω–æ—Å–∞
   - –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –∏ troubleshooting

### üî• –ö–ª—é—á–µ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

#### üöÄ **–ü–µ—Ä–µ–Ω–æ—Å –æ–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥–æ–π**
```bash
# –ù–∞ —Å—Ç–∞—Ä–æ–º —Å–µ—Ä–≤–µ—Ä–µ
make migration-prepare

# –ù–∞ –Ω–æ–≤–æ–º —Å–µ—Ä–≤–µ—Ä–µ  
make restore BACKUP=backup.tar.gz
```

#### üìä **–ß—Ç–æ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è**
- ‚úÖ **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö** - –≤—Å–µ —Å—Ç–∞—Ç—å–∏, –∏—Å—Ç–æ—á–Ω–∏–∫–∏, –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
- ‚úÖ **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è** - .env, docker-compose.yml  
- ‚úÖ **–î–∞–Ω–Ω—ã–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è** - –ª–æ–≥–∏, –∫–µ—à, –≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
- ‚úÖ **–ú–∏–≥—Ä–∞—Ü–∏–∏ –ë–î** - —Å–∫—Ä–∏–ø—Ç—ã –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏

#### üîÑ **–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è**
- –ï–∂–µ–¥–Ω–µ–≤–Ω—ã–µ –±—ç–∫–∞–ø—ã —á–µ—Ä–µ–∑ cron
- –ê–≤—Ç–æ–æ—á–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä—ã—Ö –±—ç–∫–∞–ø–æ–≤ (30+ –¥–Ω–µ–π)
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ä–∞–∑–º–µ—Ä–∞ –ë–î –∏ —Ç–æ–º–æ–≤

### üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

```
v2/
‚îú‚îÄ‚îÄ scripts/
‚îÇ   ‚îú‚îÄ‚îÄ backup.sh          # –°–∫—Ä–∏–ø—Ç —Ä–µ–∑–µ—Ä–≤–Ω–æ–≥–æ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è
‚îÇ   ‚îî‚îÄ‚îÄ restore.sh         # –°–∫—Ä–∏–ø—Ç –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è
‚îú‚îÄ‚îÄ backups/               # –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –±—ç–∫–∞–ø–æ–≤
‚îÇ   ‚îî‚îÄ‚îÄ postgres/          # –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ –±—ç–∫–∞–ø—ã PostgreSQL
‚îú‚îÄ‚îÄ exports/               # –≠–∫—Å–ø–æ—Ä—Ç—ã –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –º–∏–≥—Ä–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ docker-compose.yml     # –û–±–Ω–æ–≤–ª–µ–Ω–Ω–∞—è Docker –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îú‚îÄ‚îÄ Makefile               # –ö–æ–º–∞–Ω–¥—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
‚îú‚îÄ‚îÄ MIGRATION_GUIDE.md     # –ü–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–µ—Ä–µ–Ω–æ—Å–∞
‚îî‚îÄ‚îÄ BACKUP_SYSTEM.md       # –≠—Ç–æ—Ç —Ñ–∞–π–ª
```

### üéÆ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

#### –°–æ–∑–¥–∞–Ω–∏–µ –ø–µ—Ä–≤–æ–≥–æ –±—ç–∫–∞–ø–∞
```bash
make backup
```

#### –ü—Ä–æ—Å–º–æ—Ç—Ä —Å–æ–∑–¥–∞–Ω–Ω—ã—Ö –±—ç–∫–∞–ø–æ–≤
```bash
make list-backups
```

#### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è
```bash
# –°–æ–∑–¥–∞—Ç—å –∫–æ–ø–∏—é –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
cp -r v2/ v2_test/
cd v2_test/

# –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏–∑ –±—ç–∫–∞–ø–∞
make restore BACKUP=../v2/backups/news_aggregator_backup_*.tar.gz
```

### üîß –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã–º–∏

#### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
```bash
make db-size           # –†–∞–∑–º–µ—Ä –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
make volumes-list      # Docker —Ç–æ–º–∞  
make volumes-backup    # –ë—ç–∫–∞–ø —Ç–æ–º–æ–≤
```

#### –û—á–∏—Å—Ç–∫–∞
```bash
make cleanup-backups   # –£–¥–∞–ª–∏—Ç—å —Å—Ç–∞—Ä—ã–µ –±—ç–∫–∞–ø—ã
docker system prune -f # –û—á–∏—Å—Ç–∏—Ç—å Docker
```

### üö® Emergency –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ

–ï—Å–ª–∏ –æ—Å–Ω–æ–≤–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —É–ø–∞–ª–∞:
```bash
# 1. –ë—ã—Å—Ç—Ä–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–∑ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –±—ç–∫–∞–ø–∞
make restore BACKUP=./backups/latest_backup.tar.gz

# 2. –ò–ª–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–æ–ª—å–∫–æ –ë–î
make import FILE=./exports/latest_migration.sql
```

---

## ‚ú® –†–µ–∑—É–ª—å—Ç–∞—Ç

**–í–∞—à RSS Summarizer v2 —Ç–µ–ø–µ—Ä—å –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ–Ω–æ—Å–∏–º!**

- üéØ **5-–º–∏–Ω—É—Ç–Ω—ã–π –ø–µ—Ä–µ–Ω–æ—Å** –Ω–∞ –ª—é–±–æ–π —Å–µ—Ä–≤–µ—Ä
- üîí **100% —Å–æ—Ö—Ä–∞–Ω–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö** - —Å—Ç–∞—Ç—å–∏, –∏—Å—Ç–æ—á–Ω–∏–∫–∏, –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
- ü§ñ **–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è** - –µ–∂–µ–¥–Ω–µ–≤–Ω—ã–µ –±—ç–∫–∞–ø—ã –∏ –æ—á–∏—Å—Ç–∫–∞
- üì± **–ü—Ä–æ—Å—Ç–æ—Ç–∞** - –≤—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ `make` –∫–æ–º–∞–Ω–¥—ã
- üõ°Ô∏è **–ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å** - –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏ –∏ –æ—Ç–∫–∞—Ç

–°–∏—Å—Ç–µ–º–∞ —Å–ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∞ –¥–ª—è production –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∏ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ –≤–∞—à–∏ –¥–∞–Ω–Ω—ã–µ –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –ø–æ—Ç–µ—Ä—è—é—Ç—Å—è –ø—Ä–∏ –ø–µ—Ä–µ–Ω–æ—Å–µ –∏–ª–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ —Å–µ—Ä–≤–∏—Å–∞. 