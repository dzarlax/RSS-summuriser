# News Aggregator v2.0

–ü—Ä–æ–¥–∞–∫—à–Ω —Å–∏—Å—Ç–µ–º–∞ –∞–≥—Ä–µ–≥–∞—Ü–∏–∏ –Ω–æ–≤–æ—Å—Ç–µ–π —Å –ò–ò-—Å—É–º–º–∞—Ä–∏–∑–∞—Ü–∏–µ–π, –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º –∏ –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö PostgreSQL. –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏, –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –º–∏–≥—Ä–∞—Ü–∏–∏ –∏ –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—É—é —ç–∫—Å—Ç—Ä–∞–∫—Ü–∏—é –∫–æ–Ω—Ç–µ–Ω—Ç–∞.

## üöÄ –ë—ã—Å—Ç—Ä—ã–π –∑–∞–ø—É—Å–∫

### Docker (–ü—Ä–æ–¥–∞–∫—à–Ω)
```bash
cd v2
docker-compose up -d
```

### –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞
```bash
cd v2
pip install -r requirements.txt
python -m news_aggregator
```

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –ö–ª—é—á–µ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
- **`news_aggregator/`** - FastAPI –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å async –æ–±—Ä–∞–±–æ—Ç–∫–æ–π
- **`web/`** - HTML —à–∞–±–ª–æ–Ω—ã –∏ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã
- **`db/`** - PostgreSQL —Å—Ö–µ–º–∞ (–∞–≤—Ç–æ–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è)
- **`docker/`** - Docker –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –¥–ª—è dev/prod
- **`scripts/`** - –£—Ç–∏–ª–∏—Ç—ã –±—ç–∫–∞–ø–∞ –∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è

### –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫
- **Backend**: FastAPI + SQLAlchemy + asyncpg
- **Database**: PostgreSQL 15
- **Frontend**: Jinja2 + vanilla JS/CSS
- **Deployment**: Docker + Nginx
- **AI**: Constructor KM API integration

## ‚úÖ –°—Ç–∞—Ç—É—Å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### –ü–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤–æ
- [x] **–ú–æ–¥—É–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞** - core, services, sources
- [x] **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö** - PostgreSQL —Å –ø–æ–ª–Ω–æ–π —Å—Ö–µ–º–æ–π (11 —Ç–∞–±–ª–∏—Ü)
- [x] **–í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å** - –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å + –ø—É–±–ª–∏—á–Ω—ã–π API
- [x] **Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è** - dev/prod –æ–∫—Ä—É–∂–µ–Ω–∏—è
- [x] **–°–∏—Å—Ç–µ–º–∞ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤** - Plugin –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ (RSS, Telegram, Generic, Custom)
- [x] **AI –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è** - Constructor KM API —Å rate limiting
- [x] **AI-enhanced –∫–æ–Ω—Ç–µ–Ω—Ç —ç–∫—Å—Ç—Ä–∞–∫—Ü–∏—è** - –ü—É–±–ª–∏–∫–∞—Ü–∏—è –¥–∞—Ç, –ø–æ–ª–Ω—ã–µ —Å—Ç–∞—Ç—å–∏
- [x] **–†–µ–∫–ª–∞–º–∞ detection** - –ò–ò-–¥–µ—Ç–µ–∫—Ü–∏—è —Ä–µ–∫–ª–∞–º—ã –≤ Telegram –∫–∞–Ω–∞–ª–∞—Ö
- [x] **Telegraph –ø—É–±–ª–∏–∫–∞—Ü–∏—è** - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—É–±–ª–∏–∫–∞—Ü–∏—è —Å—Ç–∞—Ç–µ–π
- [x] **Backup —Å–∏—Å—Ç–µ–º–∞** - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –±—ç–∫–∞–ø—ã –ë–î
- [x] **Async –æ–±—Ä–∞–±–æ—Ç–∫–∞** - –í—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ
- [x] **CLI –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å** - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ –∫–æ–º–∞–Ω–¥–Ω—É—é —Å—Ç—Ä–æ–∫—É
- [x] **–ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏** - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∫–∞—Ç–µ–≥–æ—Ä–∏–π –Ω–∞ —Å—Ç–∞—Ç—å—é
- [x] **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –º–∏–≥—Ä–∞—Ü–∏–∏** - –°–∞–º–æ–ø—Ä–æ–≤–µ—Ä—è—é—â–∞—è—Å—è —Å–∏—Å—Ç–µ–º–∞ –º–∏–≥—Ä–∞—Ü–∏–π –ë–î
- [x] **–£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –º–∏–≥—Ä–∞—Ü–∏–π** - –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–π –º–µ–Ω–µ–¥–∂–µ—Ä –º–∏–≥—Ä–∞—Ü–∏–π
- [x] **–ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω–∞—è –∫–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü–∏—è** - AI —Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã–º –∞–Ω–∞–ª–∏–∑–æ–º –∏ confidence scoring

### –ß–∞—Å—Ç–∏—á–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ
- [x] **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥** - Prometheus –º–µ—Ç—Ä–∏–∫–∏ (—á–∞—Å—Ç–∏—á–Ω–æ)
- [x] **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** - –ë–∞–∑–æ–≤–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ structlog

### –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–µ–ª—ã
- [ ] **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** - 0% –ø–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏
- [ ] **GitHub Actions** - Workflows –Ω–µ –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–Ω—ã
- [ ] **API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è** - OpenAPI –Ω–µ–ø–æ–ª–Ω–∞—è

## üíª –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
- **–ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ (–Ω–æ–≤–æ—Å—Ç–∏)**: http://localhost:8000
- **–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å**: http://localhost:8000/admin (–∑–∞—â–∏—â–µ–Ω–∞ –ø–∞—Ä–æ–ª–µ–º)
- **API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**: http://localhost:8000/docs  
- **API endpoints**: http://localhost:8000/api/*
- **–°—Ç–∞—Ç—É—Å –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏**: http://localhost:8000/auth-status

### –ö–ª—é—á–µ–≤—ã–µ API endpoints
- **GET /api/v1/feed** - –õ–µ–Ω—Ç–∞ –Ω–æ–≤–æ—Å—Ç–µ–π —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –∫–∞—Ç–µ–≥–æ—Ä–∏–π
- **GET /api/v1/categories** - –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∫–∞—Ç–µ–≥–æ—Ä–∏–π —Å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º —Å—Ç–∞—Ç–µ–π
- **GET /api/v1/migrations/status** - –°—Ç–∞—Ç—É—Å —Å–∏—Å—Ç–µ–º—ã –º–∏–≥—Ä–∞—Ü–∏–π
- **POST /api/v1/migrations/run** - –ó–∞–ø—É—Å–∫ –º–∏–≥—Ä–∞—Ü–∏–π –≤—Ä—É—á–Ω—É—é
- **GET /api/v1/sources** - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∞–º–∏ –Ω–æ–≤–æ—Å—Ç–µ–π
- **POST /api/v1/process/run** - –ó–∞–ø—É—Å–∫ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –Ω–æ–≤–æ—Å—Ç–µ–π

### CLI –∫–æ–º–∞–Ω–¥—ã
```bash
# –û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–æ–≤–æ—Å—Ç–µ–π
python -m news_aggregator.cli process

# –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∞–º–∏
python -m news_aggregator.cli sources list
python -m news_aggregator.cli sources add --name "Habr" --type rss --url "https://habr.com/rss/"

# –°–∏—Å—Ç–µ–º–∞ –±—ç–∫–∞–ø–æ–≤
./scripts/backup.sh
./scripts/restore.sh <backup_path>

# –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
python -m news_aggregator.cli stats
```

### API Integration
```python
# –ü—Ä–æ–≥—Ä–∞–º–º–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫ API
import aiohttp

async def get_news():
    async with aiohttp.ClientSession() as session:
        async with session.get('http://localhost:8000/api/feed') as resp:
            return await resp.json()
```

## üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
```bash
DATABASE_URL=postgresql://user:pass@localhost:5432/newsdb
CONSTRUCTOR_KM_API=https://training.constructor.app/api/platform-kmapi/v1/knowledge-models/your-model-id/chat/completions/direct_llm
CONSTRUCTOR_KM_API_KEY=Bearer your_api_key_here
TELEGRAM_TOKEN=your_bot_token
TELEGRAM_CHAT_ID=your_chat_id

# –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –∞–¥–º–∏–Ω–∫–∏ (–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û!)
ADMIN_USERNAME=admin
ADMIN_PASSWORD=your_secure_password

# AI –º–æ–¥–µ–ª–∏ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –∑–∞–¥–∞—á
SUMMARIZATION_MODEL=gpt-4o-mini    # –°—É–º–º–∞—Ä–∏–∑–∞—Ü–∏—è —Å—Ç–∞—Ç–µ–π
CATEGORIZATION_MODEL=gpt-4o-mini   # –ö–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü–∏—è –Ω–æ–≤–æ—Å—Ç–µ–π
DIGEST_MODEL=gpt-4.1               # –§–∏–Ω–∞–ª—å–Ω—ã–µ –¥–∞–π–¥–∂–µ—Å—Ç—ã

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–π (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
NEWS_CATEGORIES=Business,Tech,Science,Serbia,Nature,Media,Marketing,Other
DEFAULT_CATEGORY=Other

# –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —ç–∫—Å—Ç—Ä–∞–∫—Ü–∏–∏ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
MAX_CONTENT_LENGTH=8000
MIN_CONTENT_LENGTH=200
BROWSER_CONCURRENCY=2
PLAYWRIGHT_TIMEOUT_FIRST_MS=25000
```

### Docker Compose Override
```bash
cp docker-compose.override.yml.example docker-compose.override.yml
# –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
```

## üîç –ú–µ—Ç–æ–¥—ã —ç–∫—Å—Ç—Ä–∞–∫—Ü–∏–∏ —Å—Ç–∞—Ç–µ–π

–°–∏—Å—Ç–µ–º–∞ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ç–∏–ø–æ–≤ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ –∏ –º–µ—Ç–æ–¥–æ–≤ —ç–∫—Å—Ç—Ä–∞–∫—Ü–∏–∏ –∫–æ–Ω—Ç–µ–Ω—Ç–∞:

### üóÇÔ∏è –¢–∏–ø—ã –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤

#### **RSS Sources** (`rss`)
- **–û–ø–∏—Å–∞–Ω–∏–µ**: –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ RSS/Atom —Ñ–∏–¥—ã
- **–≠–∫—Å—Ç—Ä–∞–∫—Ü–∏—è**: –ü–∞—Ä—Å–∏–Ω–≥ XML —Å—Ç—Ä—É–∫—Ç—É—Ä—ã —Ñ–∏–¥–∞
- **–ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ**: –ó–∞–≥–æ–ª–æ–≤–æ–∫, –æ–ø–∏—Å–∞–Ω–∏–µ, —Å—Å—ã–ª–∫–∞, –¥–∞—Ç–∞ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏
- **–ü—Ä–∏–º–µ—Ä**: `https://habr.com/rss/`, `https://lenta.ru/rss`

#### **Telegram Sources** (`telegram`)
- **–û–ø–∏—Å–∞–Ω–∏–µ**: Telegram –∫–∞–Ω–∞–ª—ã —á–µ—Ä–µ–∑ Bot API
- **–≠–∫—Å—Ç—Ä–∞–∫—Ü–∏—è**: –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π —á–µ—Ä–µ–∑ Telegram Bot
- **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏**: AI-–¥–µ—Ç–µ–∫—Ü–∏—è —Ä–µ–∫–ª–∞–º—ã, –æ–±—Ä–∞–±–æ—Ç–∫–∞ –º–µ–¥–∏–∞
- **–ü—Ä–∏–º–µ—Ä**: `https://t.me/tech_news_channel`

#### **Generic Sources** (`reddit`, `twitter`, `news_api`)
- **–û–ø–∏—Å–∞–Ω–∏–µ**: –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏ –±–µ–∑ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –∑–∞–≥—Ä—É–∑–∫–∏
- **–≠–∫—Å—Ç—Ä–∞–∫—Ü–∏—è**: –†—É—á–Ω–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –∏–ª–∏ –≤–Ω–µ—à–Ω–∏–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
- **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ**: –î–ª—è –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤, —Ç—Ä–µ–±—É—é—â–∏—Ö —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏

#### **Custom Sources** (`custom`)
- **–û–ø–∏—Å–∞–Ω–∏–µ**: –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≤–µ–±-—Å—Ç—Ä–∞–Ω–∏—Ü —Å –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–º–∏ —Å–µ–ª–µ–∫—Ç–æ—Ä–∞–º–∏
- **–≠–∫—Å—Ç—Ä–∞–∫—Ü–∏—è**: Page Monitor —Å CSS —Å–µ–ª–µ–∫—Ç–æ—Ä–∞–º–∏
- **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏**: –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π, —Å–Ω–∞–ø—à–æ—Ç—ã —Å—Ç—Ä–∞–Ω–∏—Ü

### üß† AI-Enhanced —ç–∫—Å—Ç—Ä–∞–∫—Ü–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞

#### **–ú–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤–∞—è —ç–∫—Å—Ç—Ä–∞–∫—Ü–∏—è**
1. **HTML –ø–∞—Ä—Å–∏–Ω–≥** - BeautifulSoup + Readability
2. **CSS —Å–µ–ª–µ–∫—Ç–æ—Ä—ã** - Schema.org, —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–µ —Ç–µ–≥–∏
3. **Playwright –±—Ä–∞—É–∑–µ—Ä** - JavaScript-—Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ –¥–ª—è SPA
4. **AI –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è** - –ú–∞—à–∏–Ω–Ω–æ–µ –æ–±—É—á–µ–Ω–∏–µ –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è —Å–µ–ª–µ–∫—Ç–æ—Ä–æ–≤

#### **–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Å—Ö–µ–º—ã —Ä–∞–∑–º–µ—Ç–∫–∏**

##### **Schema.org Microdata**
```html
<article itemtype="http://schema.org/NewsArticle">
  <div itemprop="articleBody">–°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ —Å—Ç–∞—Ç—å–∏...</div>
  <time itemprop="datePublished">2024-01-15</time>
</article>
```

##### **JSON-LD Structured Data**
```json
{
  "@context": "https://schema.org",
  "@type": "NewsArticle",
  "articleBody": "–°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ —Å—Ç–∞—Ç—å–∏...",
  "datePublished": "2024-01-15"
}
```

##### **Open Graph Protocol**
```html
<meta property="og:title" content="–ó–∞–≥–æ–ª–æ–≤–æ–∫ —Å—Ç–∞—Ç—å–∏" />
<meta property="og:description" content="–û–ø–∏—Å–∞–Ω–∏–µ..." />
<meta property="article:published_time" content="2024-01-15" />
```

##### **Semantic HTML5**
```html
<main>
  <article role="main">
    <header><h1>–ó–∞–≥–æ–ª–æ–≤–æ–∫</h1></header>
    <section>–°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ —Å—Ç–∞—Ç—å–∏...</section>
    <time datetime="2024-01-15">15 —è–Ω–≤–∞—Ä—è 2024</time>
  </article>
</main>
```

#### **CSS —Å–µ–ª–µ–∫—Ç–æ—Ä—ã –ø–æ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—É**

##### **–í—ã—Å–æ–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç** (Schema.org)
- `[itemtype*="Article"] [itemprop="articleBody"]`
- `[itemtype*="NewsArticle"] [itemprop="articleBody"]`
- `[itemtype*="BlogPosting"] [itemprop="articleBody"]`

##### **–°—Ä–µ–¥–Ω–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç** (–°–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–µ —Ç–µ–≥–∏)
- `article[role="main"]`
- `main article`
- `[role="main"] article`

##### **–°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∏**
- `.prose` (TailwindCSS typography)
- `.container .text-base`
- `[class*="text-"] div:not([class*="nav"])`

##### **–°–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –¥–ª—è —Ä—É—Å—Å–∫–∏—Ö —Å–∞–π—Ç–æ–≤**
- `.mb-14` (N+1.ru)
- `.article__text`
- `.news-text`, `.news-content`
- `.material-text`, `.full-text`

##### **CMS –ø–∞—Ç—Ç–µ—Ä–Ω—ã**
- `.entry-content` (WordPress)
- `.post-content`
- `.article-content`
- `.content-body`

#### **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –ø–∞—Ä—Å–µ—Ä—ã**

##### **BalkanInsight Parser**
- **–î–æ–º–µ–Ω**: `balkaninsight.com`
- **–°–µ–ª–µ–∫—Ç–æ—Ä—ã**: –°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–ª—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã —Å–∞–π—Ç–∞
- **–ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ**: –î–∞—Ç–∞ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏, –∞–≤—Ç–æ—Ä, —Ç–µ–≥–∏

##### **–†–∞—Å—à–∏—Ä—è–µ–º–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞**
```python
class CustomParser(BaseCustomParser):
    def can_parse(self, url: str) -> bool:
        return "example.com" in url
    
    def extract_content(self, soup: BeautifulSoup, url: str) -> str:
        return soup.select_one('.custom-content').get_text()
```

### ü§ñ AI-—Å–µ—Ä–≤–∏—Å—ã –æ–±—Ä–∞–±–æ—Ç–∫–∏

#### **–ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∞–Ω–∞–ª–∏–∑** (`analyze_article_complete`)
- **–°—É–º–º–∞—Ä–∏–∑–∞—Ü–∏—è**: 2-3 –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ
- **–ö–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü–∏—è**: Business, Tech, Science, Serbia, Other + confidence
- **–î–µ—Ç–µ–∫—Ü–∏—è —Ä–µ–∫–ª–∞–º—ã**: Heuristics + AI —Å —Ç–∏–ø–∏–∑–∞—Ü–∏–µ–π
- **–ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –¥–∞—Ç**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –¥–∞—Ç—ã –ø—É–±–ª–∏–∫–∞—Ü–∏–∏

#### **–°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ AI-—Å–µ—Ä–≤–∏—Å—ã**

##### **CategorizationAI**
- **–ú–æ–¥–µ–ª—å**: –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º–∞—è —á–µ—Ä–µ–∑ `CATEGORIZATION_MODEL`
- **–ö–∞—Ç–µ–≥–æ—Ä–∏–∏**: –ö–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä—É–µ–º—ã–µ —á–µ—Ä–µ–∑ `NEWS_CATEGORIES`
- **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ**: 1 —á–∞—Å TTL
- **Fallback**: –ö–∞—Ç–µ–≥–æ—Ä–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é

##### **TelegramAI**
- **–°–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è**: –û–±—Ä–∞–±–æ—Ç–∫–∞ Telegram –∫–æ–Ω—Ç–µ–Ω—Ç–∞
- **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏**: –î–µ—Ç–µ–∫—Ü–∏—è –º–µ–¥–∏–∞, –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–æ—Ä–≤–∞—Ä–¥–æ–≤
- **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è**: –° Telegram Bot API

##### **AdDetector**
- **–≠–≤—Ä–∏—Å—Ç–∏–∫–∏**: –†–µ–≥—É–ª—è—Ä–Ω—ã–µ –≤—ã—Ä–∞–∂–µ–Ω–∏—è –¥–ª—è –º–∞—Ä–∫–µ—Ä–æ–≤ —Ä–µ–∫–ª–∞–º—ã
- **AI —É—Ç–æ—á–Ω–µ–Ω–∏–µ**: –ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –¥–ª—è —Å–ø–æ—Ä–Ω—ã—Ö —Å–ª—É—á–∞–µ–≤
- **–¢–∏–ø–∏–∑–∞—Ü–∏—è**: `product_promotion`, `service_offer`, `event_promotion`
- **Confidence scoring**: 0.0-1.0 —Å –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ–º —Ä–µ—à–µ–Ω–∏—è

#### **–°–∏—Å—Ç–µ–º–∞ –æ–±—É—á–µ–Ω–∏—è –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏**

##### **ExtractionMemory**
- **–û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ**: –£—Å–ø–µ—à–Ω–æ—Å—Ç—å —ç–∫—Å—Ç—Ä–∞–∫—Ü–∏–∏ –ø–æ –¥–æ–º–µ–Ω–∞–º
- **–û–±—É—á–µ–Ω–∏–µ**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–ª—É—á—à–µ–Ω–∏–µ —Å–µ–ª–µ–∫—Ç–æ—Ä–æ–≤
- **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞**: –ö–∞—á–µ—Å—Ç–≤–æ —ç–∫—Å—Ç—Ä–∞–∫—Ü–∏–∏, –≤—Ä–µ–º—è –æ–±—Ä–∞–±–æ—Ç–∫–∏

##### **DomainStabilityTracker**
- **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥**: –°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å –¥–æ–º–µ–Ω–æ–≤ –≤–æ –≤—Ä–µ–º–µ–Ω–∏
- **–ê–¥–∞–ø—Ç–∞—Ü–∏—è**: –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –º–µ—Ç–æ–¥–æ–≤ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã
- **–ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è**: –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –ø—Ä–æ–±–ª–µ–º–Ω—ã—Ö –¥–æ–º–µ–Ω–∞—Ö

##### **AIExtractionOptimizer**
- **–ú–∞—à–∏–Ω–Ω–æ–µ –æ–±—É—á–µ–Ω–∏–µ**: –£–ª—É—á—à–µ–Ω–∏–µ —Å–µ–ª–µ–∫—Ç–æ—Ä–æ–≤ –Ω–∞ –æ—Å–Ω–æ–≤–µ —É—Å–ø–µ—à–Ω–æ—Å—Ç–∏
- **A/B —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**: –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Ä–∞–∑–Ω—ã—Ö –ø–æ–¥—Ö–æ–¥–æ–≤
- **–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è**: –°–∞–º–æ–æ–±—É—á–∞—é—â–∞—è—Å—è —Å–∏—Å—Ç–µ–º–∞

### ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —ç–∫—Å—Ç—Ä–∞–∫—Ü–∏–∏

#### **–ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏**
```python
MAX_CONTENT_LENGTH = 8000        # –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –¥–ª–∏–Ω–∞ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
MIN_CONTENT_LENGTH = 200         # –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –¥–ª–∏–Ω–∞ –¥–ª—è –≤–∞–ª–∏–¥–Ω–æ—Å—Ç–∏
BROWSER_CONCURRENCY = 2          # –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–µ –±—Ä–∞—É–∑–µ—Ä–Ω—ã–µ —Å–µ—Å—Å–∏–∏
PLAYWRIGHT_TIMEOUT_FIRST_MS = 25000   # –¢–∞–π–º–∞—É—Ç –ø–µ—Ä–≤–æ–π –ø–æ–ø—ã—Ç–∫–∏
PLAYWRIGHT_TOTAL_BUDGET_MS = 90000    # –û–±—â–∏–π –±—é–¥–∂–µ—Ç –≤—Ä–µ–º–µ–Ω–∏
MIN_QUALITY_SCORE = 30           # –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –±–∞–ª–ª –∫–∞—á–µ—Å—Ç–≤–∞
```

#### **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ**
```python
HTML_CACHE_TTL_SECONDS = 300     # –ö—ç—à HTML –Ω–∞ 5 –º–∏–Ω—É—Ç
SELECTOR_CACHE_TTL_SECONDS = 21600 # –ö—ç—à —Å–µ–ª–µ–∫—Ç–æ—Ä–æ–≤ –Ω–∞ 6 —á–∞—Å–æ–≤
```

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- **CLAUDE.md** - –ü–æ–ª–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- **QUICKSTART.md** - –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤
- **BACKUP_SYSTEM.md** - –°–∏—Å—Ç–µ–º–∞ –±—ç–∫–∞–ø–æ–≤ –∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è
- **MIGRATION_GUIDE.md** - –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –º–∏–≥—Ä–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö
- **SYNOLOGY_MIGRATION_GUIDE.md** - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –º–∏–≥—Ä–∞—Ü–∏–∏ –¥–ª—è Synology
- **CONTENT_EXTRACTOR_IMPROVEMENTS.md** - AI-enhanced —ç–∫—Å—Ç—Ä–∞–∫—Ü–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞
- **AI_ENHANCEMENTS.md** - –°–∏—Å—Ç–µ–º–∞ –ò–ò-—É–ª—É—á—à–µ–Ω–∏–π –∏ –¥–µ—Ç–µ–∫—Ü–∏–∏ —Ä–µ–∫–ª–∞–º—ã

## üêõ –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

1. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Ç–µ—Å—Ç–æ–≤** - –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π –ø—Ä–æ–±–µ–ª, —Ç—Ä–µ–±—É–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω–∏—è pytest
2. **GitHub Actions** - Workflows –Ω–µ –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–Ω—ã –ø–æ–¥ –Ω–æ–≤—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É
3. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥** - Prometheus –º–µ—Ç—Ä–∏–∫–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã —á–∞—Å—Ç–∏—á–Ω–æ

## ü§ù –í–∫–ª–∞–¥ –≤ –ø—Ä–æ–µ–∫—Ç

1. Fork —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
2. –°–æ–∑–¥–∞–π—Ç–µ feature branch
3. –î–æ–±–∞–≤—å—Ç–µ —Ç–µ—Å—Ç—ã –¥–ª—è –Ω–æ–≤–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏
4. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—Å–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–æ—Ö–æ–¥—è—Ç
5. –°–æ–∑–¥–∞–π—Ç–µ Pull Request

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

[–£–∫–∞–∂–∏—Ç–µ –ª–∏—Ü–µ–Ω–∑–∏—é –ø—Ä–æ–µ–∫—Ç–∞]