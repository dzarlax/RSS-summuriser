{# Shared sticky filters toolbar for list and cards views #}
<div class="filters-sticky" id="filters-sticky" role="toolbar" aria-label="–§–∏–ª—å—Ç—Ä—ã –Ω–æ–≤–æ—Å—Ç–µ–π">
  <!-- Mobile-first: Vertical Stack -->
  <div class="filters-mobile-stack">

    <!-- Row 1: Search Input (Full Width on Mobile) -->
    <div class="search-row">
      <div class="search-input-wrapper">
        <span class="search-icon">üîç</span>
        <input type="text"
               class="search-input-mobile"
               id="search-input-mobile"
               placeholder="–ü–æ–∏—Å–∫ –Ω–æ–≤–æ—Å—Ç–µ–π..."
               autocomplete="off"
               spellcheck="false">
      </div>
    </div>

    <!-- Row 1.5: Segmented Control (Categories | Sources) - Mobile only -->
    <div class="segmented-control-row">
      <div class="segmented-control">
        <button class="segment segment-active" data-tab="categories" onclick="switchTab('categories')" aria-label="–§–∏–ª—å—Ç—Ä –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º">
          –ö–∞—Ç–µ–≥–æ—Ä–∏–∏
        </button>
        <button class="segment" data-tab="sources" onclick="switchTab('sources')" aria-label="–§–∏–ª—å—Ç—Ä –ø–æ –∏—Å—Ç–æ—á–Ω–∏–∫–∞–º">
          –ò—Å—Ç–æ—á–Ω–∏–∫–∏
        </button>
      </div>
    </div>

    <!-- Row 2: Horizontal Scrolling Chips (Dynamically changed based on active tab) -->
    <div class="chips-row">
      <div class="chips-container" id="chips-container">
        <!-- Category chips (shown when Categories tab is active) -->
        <div class="chips-group chips-categories" id="chips-categories" style="display: flex; gap: 8px;">
          <button class="chip chip-active" data-category="all" onclick="filterByCategory('all')">
            –í—Å–µ
          </button>
          <!-- More category chips will be injected here dynamically -->
        </div>

        <!-- Source chips (shown when Sources tab is active) -->
        <div class="chips-group chips-sources" id="chips-sources" style="display: none; gap: 8px;">
          <button class="chip chip-active" data-source="all" onclick="filterBySource('all')">
            –í—Å–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏
          </button>
          <!-- Source chips will be injected here dynamically -->
        </div>
      </div>
    </div>

  </div>

  <!-- Desktop Fallback: Original horizontal layout (hidden on mobile) -->
  <div class="filters-desktop-inline">
    <div class="filter-buttons" id="filter-buttons" aria-live="polite" style="display:none;"></div>

    <div class="toolbar-group search-group" aria-label="–ü–æ–∏—Å–∫">
      <div class="search-container" id="search-container">
        <!-- Collapsed state -->
        <button class="qt-btn search-toggle" id="search-toggle" onclick="toggleSearch()" title="–ü–æ–∏—Å–∫ –ø–æ –Ω–æ–≤–æ—Å—Ç—è–º">
          <span class="qt-ico">üîç</span><span class="btn-label">–ü–æ–∏—Å–∫</span>
        </button>

        <!-- Expanded state -->
        <div class="search-expanded" id="search-expanded" style="display: none;">
          <input type="text"
                 class="search-input"
                 id="search-input"
                 placeholder="–ü–æ–∏—Å–∫ –ø–æ –Ω–æ–≤–æ—Å—Ç—è–º..."
                 autocomplete="off"
                 spellcheck="false">
          <button class="search-btn search-submit" onclick="performSearch()" title="–ù–∞–π—Ç–∏">
            <span class="qt-ico">üîç</span>
          </button>
          <button class="search-btn search-close" onclick="closeSearch()" title="–ó–∞–∫—Ä—ã—Ç—å">
            <span class="qt-ico">‚úï</span>
          </button>
        </div>

        <!-- Search results dropdown -->
        <div class="search-results" id="search-results" style="display: none;">
          <div class="search-results-content" id="search-results-content">
            <!-- Results will be populated here -->
          </div>
        </div>
      </div>
    </div>

    <div class="toolbar-group">
      <div class="since-controls" aria-label="–ü–µ—Ä–∏–æ–¥">
        <button class="since-btn" data-since="24" onclick="setSinceHours(24)" aria-pressed="false" title="–∑–∞ 24 —á–∞—Å–∞">24—á</button>
        <button class="since-btn" data-since="48" onclick="setSinceHours(48)" aria-pressed="false" title="–∑–∞ 48 —á–∞—Å–æ–≤">48—á</button>
        <button class="since-btn" data-since="168" onclick="setSinceHours(168)" aria-pressed="false" title="–∑–∞ 7 –¥–Ω–µ–π">7–¥</button>
      </div>
    </div>

    <div class="toolbar-group quick-toggles" aria-label="–ë—ã—Å—Ç—Ä—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏">
      <button class="qt-btn" id="qt-hide-ads-desktop" onclick="toggleHideAds(!window.hideAds)" aria-pressed="true" title="–°–∫—Ä—ã–≤–∞—Ç—å —Ä–µ–∫–ª–∞–º—É">
        <span class="qt-ico">üßπ</span><span class="btn-label">–ë–µ–∑ —Ä–µ–∫–ª–∞–º—ã</span>
      </button>
    </div>
  </div>
</div>

<script>
// One-time init for sticky toolbar: navbar offset and auto-hide on scroll
(function(){
  try {
    const nav = document.querySelector('.navbar');
    const applyHeight = () => {
      const h = (nav && nav.offsetHeight) ? nav.offsetHeight : 56;
      document.documentElement.style.setProperty('--navbar-height', h + 'px');
    };
    applyHeight();
    window.addEventListener('resize', applyHeight);
  } catch {}

  try {
    const sticky = document.getElementById('filters-sticky');
    let lastY = window.scrollY;
    window.addEventListener('scroll', () => {
      const y = window.scrollY;
      const down = y > lastY;
      const threshold = 20;
      if (Math.abs(y - lastY) > threshold) {
        if (down && y > 80) sticky?.classList.add('hide');
        else sticky?.classList.remove('hide');
        lastY = y;
      }
    }, { passive: true });
  } catch {}
})();
</script>

<script>
// Search functionality
let searchTimeout = null;
let searchResults = [];

function toggleSearch() {
  const container = document.getElementById('search-container');
  const toggle = document.getElementById('search-toggle');
  const expanded = document.getElementById('search-expanded');
  const input = document.getElementById('search-input');
  
  const isExpanded = !toggle.style.display || toggle.style.display === 'block';
  
  if (isExpanded) {
    // Expand search
    toggle.style.display = 'none';
    expanded.style.display = 'flex';
    container.classList.add('search-active');
    
    // Focus input after animation
    setTimeout(() => {
      input.focus();
    }, 150);
  } else {
    closeSearch();
  }
}

function closeSearch() {
  const container = document.getElementById('search-container');
  const toggle = document.getElementById('search-toggle');
  const expanded = document.getElementById('search-expanded');
  const results = document.getElementById('search-results');
  const input = document.getElementById('search-input');
  
  // Hide elements
  toggle.style.display = 'block';
  expanded.style.display = 'none';
  results.style.display = 'none';
  container.classList.remove('search-active');
  
  // Clear input
  input.value = '';
  
  // Clear any pending search
  if (searchTimeout) {
    clearTimeout(searchTimeout);
    searchTimeout = null;
  }
}

function performSearch() {
  const input = document.getElementById('search-input');
  const query = input.value.trim();
  
  if (query.length >= 2) {
    window.location.href = `/search?q=${encodeURIComponent(query)}`;
  } else {
    showSearchError('–ü–æ–∏—Å–∫–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å –º–∏–Ω–∏–º—É–º 2 —Å–∏–º–≤–æ–ª–∞');
  }
}

function performLiveSearch(query) {
  if (!query || query.length < 2) {
    hideSearchResults();
    return;
  }
  
  // Clear previous timeout
  if (searchTimeout) {
    clearTimeout(searchTimeout);
  }
  
  // Debounce search
  searchTimeout = setTimeout(async () => {
    try {
      showSearchLoading();
      
      const response = await fetch(`/api/public/search?q=${encodeURIComponent(query)}&limit=5`, {
        method: 'GET',
        headers: {
          'Content-Type': 'application/json'
        }
      });
      
      if (response.ok) {
        const data = await response.json();
        showSearchResults(data.articles || []);
      } else {
        showSearchError('–û—à–∏–±–∫–∞ –ø–æ–∏—Å–∫–∞');
      }
    } catch (error) {
      console.error('Search error:', error);
      showSearchError('–û—à–∏–±–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è');
    }
  }, 300);
}

function showSearchResults(articles) {
  const results = document.getElementById('search-results');
  const content = document.getElementById('search-results-content');
  
  if (!articles || articles.length === 0) {
    content.innerHTML = '<div class="search-no-results">–ù–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ</div>';
  } else {
    content.innerHTML = articles.map(article => `
      <div class="search-result-item" onclick="openArticleFromSearch(${article.id})">
        <div class="search-result-title">${escapeHtml(article.title)}</div>
        <div class="search-result-meta">
          <span class="search-result-source">${escapeHtml(article.source_name || '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫')}</span>
          <span class="search-result-date">${formatSearchDate(article.published_at)}</span>
        </div>
      </div>
    `).join('');
  }
  
  results.style.display = 'block';
}

function showSearchLoading() {
  const results = document.getElementById('search-results');
  const content = document.getElementById('search-results-content');
  
  content.innerHTML = '<div class="search-loading">‚è≥ –ü–æ–∏—Å–∫...</div>';
  results.style.display = 'block';
}

function showSearchError(message) {
  const results = document.getElementById('search-results');
  const content = document.getElementById('search-results-content');
  
  content.innerHTML = `<div class="search-error">‚ùå ${message}</div>`;
  results.style.display = 'block';
}

function hideSearchResults() {
  const results = document.getElementById('search-results');
  results.style.display = 'none';
}

function openArticleFromSearch(articleId) {
  // Close search first
  closeSearch();
  
  // Open article modal if available
  if (typeof window.openArticleModal === 'function') {
    window.openArticleModal(articleId);
  } else {
    // Fallback to article page
    window.location.href = `/article/${articleId}`;
  }
}

function formatSearchDate(dateString) {
  if (!dateString) return '';
  
  try {
    const date = new Date(dateString);
    const now = new Date();
    const diffHours = Math.floor((now - date) / (1000 * 60 * 60));
    
    if (diffHours < 1) return '—Ç–æ–ª—å–∫–æ —á—Ç–æ';
    if (diffHours < 24) return `${diffHours}—á –Ω–∞–∑–∞–¥`;
    
    const diffDays = Math.floor(diffHours / 24);
    if (diffDays < 7) return `${diffDays}–¥ –Ω–∞–∑–∞–¥`;
    
    return date.toLocaleDateString('ru-RU');
  } catch (e) {
    return '';
  }
}

function escapeHtml(text) {
  if (!text) return '';
  const div = document.createElement('div');
  div.textContent = text;
  return div.innerHTML;
}

// Setup search input events
document.addEventListener('DOMContentLoaded', function() {
  const input = document.getElementById('search-input');
  if (input) {
    // Live search on input
    input.addEventListener('input', function(e) {
      performLiveSearch(e.target.value);
    });
    
    // Submit on Enter
    input.addEventListener('keydown', function(e) {
      if (e.key === 'Enter') {
        e.preventDefault();
        performSearch();
      } else if (e.key === 'Escape') {
        closeSearch();
      }
    });
  }
  
  // Close search when clicking outside
  document.addEventListener('click', function(e) {
    const container = document.getElementById('search-container');
    if (container && !container.contains(e.target)) {
      closeSearch();
    }
  });

  // Mobile search input
  const mobileInput = document.getElementById('search-input-mobile');
  if (mobileInput) {
    mobileInput.addEventListener('keydown', function(e) {
      if (e.key === 'Enter') {
        e.preventDefault();
        const query = e.target.value.trim();
        if (query.length >= 2) {
          window.location.href = `/search?q=${encodeURIComponent(query)}`;
        }
      }
    });
  }

  // Time filter chips activation
  document.querySelectorAll('.chip-time').forEach(chip => {
    chip.addEventListener('click', function() {
      // Remove active state from all time chips
      document.querySelectorAll('.chip-time').forEach(c => {
        c.setAttribute('aria-pressed', 'false');
      });
      // Set active state on clicked chip
      this.setAttribute('aria-pressed', 'true');
    });
  });

  // Initialize Hide Ads chip state
  const hideAdsChip = document.getElementById('chip-hide-ads');
  if (hideAdsChip && typeof window.hideAds !== 'undefined') {
    hideAdsChip.setAttribute('aria-pressed', window.hideAds ? 'true' : 'false');
  }

  // Initialize category and source chips
  populateCategoryChips();
  populateSourceChips();
});

// Category filter function (for chips)
function filterByCategory(category) {
  // Remove active class from all category chips
  document.querySelectorAll('.chip[data-category]').forEach(chip => {
    chip.classList.remove('chip-active');
  });

  // Add active class to clicked chip
  const activeChip = document.querySelector(`.chip[data-category="${category}"]`);
  if (activeChip) {
    activeChip.classList.add('chip-active');
  }

  // Apply filter (redirect with category param)
  if (category === 'all') {
    window.location.href = '/';
  } else {
    window.location.href = `/?category=${encodeURIComponent(category)}`;
  }
}

// Source filter function (for chips)
function filterBySource(source) {
  // Remove active class from all source chips
  document.querySelectorAll('.chip[data-source]').forEach(chip => {
    chip.classList.remove('chip-active');
  });

  // Add active class to clicked chip
  const activeChip = document.querySelector(`.chip[data-source="${source}"]`);
  if (activeChip) {
    activeChip.classList.add('chip-active');
  }

  // Apply filter (redirect with source param)
  if (source === 'all') {
    window.location.href = '/';
  } else {
    window.location.href = `/?source=${encodeURIComponent(source)}`;
  }
}

// Tab switching function for segmented control
function switchTab(tab) {
  // Update segment buttons
  document.querySelectorAll('.segment').forEach(segment => {
    segment.classList.remove('segment-active');
    if (segment.getAttribute('data-tab') === tab) {
      segment.classList.add('segment-active');
    }
  });

  // Show/hide chip groups
  const categoriesGroup = document.getElementById('chips-categories');
  const sourcesGroup = document.getElementById('chips-sources');

  if (tab === 'categories') {
    categoriesGroup.style.display = 'flex';
    sourcesGroup.style.display = 'none';
  } else if (tab === 'sources') {
    categoriesGroup.style.display = 'none';
    sourcesGroup.style.display = 'flex';
  }
}

// Fetch and populate category chips
async function populateCategoryChips() {
  try {
    const response = await fetch('/api/public/categories/config');
    const data = await response.json();

    const container = document.getElementById('chips-categories');
    if (!container || !data.categories) return;

    // Clear existing chips (keep "–í—Å–µ")
    const allChip = container.querySelector('.chip[data-category="all"]');
    container.innerHTML = '';
    if (allChip) {
      container.appendChild(allChip);
    }

    // Add category chips
    Object.entries(data.categories).forEach(([key, value]) => {
      if (key === 'all') return; // Skip "all" as it's already added

      const chip = document.createElement('button');
      chip.className = 'chip';
      chip.setAttribute('data-category', key);
      chip.onclick = () => filterByCategory(key);
      chip.textContent = value.name || key;

      container.appendChild(chip);
    });
  } catch (error) {
    console.error('Failed to load categories:', error);
  }
}

// Fetch and populate source chips
async function populateSourceChips() {
  try {
    const response = await fetch('/api/public/sources');
    const data = await response.json();

    const container = document.getElementById('chips-sources');
    if (!container || !data.source_names) return;

    // Clear existing chips (keep "–í—Å–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏")
    const allChip = container.querySelector('.chip[data-source="all"]');
    container.innerHTML = '';
    if (allChip) {
      container.appendChild(allChip);
    }

    // Add source chips (sorted by count)
    const sortedSources = Object.entries(data.sources)
      .sort((a, b) => b[1] - a[1]) // Sort by count descending
      .slice(0, 10); // Limit to top 10 sources

    sortedSources.forEach(([sourceId, count]) => {
      const sourceName = data.source_names[sourceId];
      if (!sourceName) return;

      const chip = document.createElement('button');
      chip.className = 'chip';
      chip.setAttribute('data-source', sourceId);
      chip.onclick = () => filterBySource(sourceId);
      chip.innerHTML = `${sourceName} <span style="opacity: 0.6; font-size: 12px; margin-left: 4px;">(${count})</span>`;

      container.appendChild(chip);
    });
  } catch (error) {
    console.error('Failed to load sources:', error);
  }
}
</script>

<style>
/* Search container styles */
.search-container {
  position: relative;
  display: flex;
  align-items: center;
  min-width: 200px;
}

.search-container.search-active {
  min-width: 300px;
}

/* Search expanded state */
.search-expanded {
  display: none;
  align-items: center;
  background: white;
  border: 1px solid #e2e8f0;
  border-radius: 8px;
  padding: 4px;
  box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
  min-width: 280px;
  animation: searchExpand 0.2s ease-out;
}

@keyframes searchExpand {
  from {
    opacity: 0;
    transform: scale(0.95);
    width: 60px;
  }
  to {
    opacity: 1;
    transform: scale(1);
    width: 100%;
  }
}

.search-input {
  flex: 1;
  border: none;
  outline: none;
  padding: 8px 12px;
  font-size: 14px;
  background: transparent;
  color: #1e293b;
  min-width: 200px;
}

.search-input::placeholder {
  color: #94a3b8;
}

.search-btn {
  background: none;
  border: none;
  padding: 6px 8px;
  cursor: pointer;
  border-radius: 4px;
  color: #64748b;
  transition: all 0.2s;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 14px;
}

.search-btn:hover {
  background: rgba(0, 0, 0, 0.05);
  color: #1e293b;
}

.search-btn .qt-ico {
  font-size: 14px;
}

/* Search results dropdown */
.search-results {
  position: absolute;
  top: 100%;
  left: 0;
  right: 0;
  background: white;
  border: 1px solid #e2e8f0;
  border-radius: 8px;
  box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
  z-index: 1000;
  margin-top: 4px;
  max-height: 400px;
  overflow-y: auto;
  animation: searchResultsShow 0.2s ease-out;
}

@keyframes searchResultsShow {
  from {
    opacity: 0;
    transform: translateY(-10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.search-results-content {
  padding: 8px;
}

.search-result-item {
  padding: 12px;
  border-radius: 6px;
  cursor: pointer;
  transition: background-color 0.2s;
  border-bottom: 1px solid #f1f5f9;
}

.search-result-item:last-child {
  border-bottom: none;
}

.search-result-item:hover {
  background: #f8fafc;
}

.search-result-title {
  font-weight: 600;
  color: #1e293b;
  font-size: 14px;
  line-height: 1.4;
  margin-bottom: 4px;
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

.search-result-meta {
  display: flex;
  justify-content: space-between;
  align-items: center;
  font-size: 12px;
  color: #64748b;
}

.search-result-source {
  font-weight: 500;
  color: #3b82f6;
}

.search-result-date {
  color: #94a3b8;
}

/* Search states */
.search-loading,
.search-error,
.search-no-results {
  padding: 16px;
  text-align: center;
  color: #64748b;
  font-size: 14px;
}

.search-error {
  color: #ef4444;
}

.search-loading {
  color: #3b82f6;
}

/* Responsive adjustments */
@media (max-width: 768px) {
  .search-container {
    min-width: 150px;
  }
  
  .search-container.search-active {
    min-width: 250px;
  }
  
  .search-expanded {
    min-width: 240px;
  }
  
  .search-input {
    min-width: 160px;
  }
  
  .search-results {
    max-height: 300px;
  }
}

@media (max-width: 480px) {
  .search-container.search-active {
    position: fixed;
    top: 10px;
    left: 10px;
    right: 10px;
    z-index: 1001;
    min-width: auto;
  }
  
  .search-expanded {
    min-width: auto;
    width: 100%;
  }
  
  .search-input {
    min-width: auto;
  }
}

/* ========================================
   MOBILE-FIRST REDESIGN
   ======================================== */

/* Hide desktop version on mobile, show mobile version */
.filters-mobile-stack {
  display: flex;
  flex-direction: column;
  gap: 12px;
  padding: 12px 16px;
  background: white;
  border-bottom: 1px solid #e2e8f0;
}

.filters-desktop-inline {
  display: none;
}

/* Row 1: Full-Width Search Input */
.search-row {
  width: 100%;
}

/* Row 1.5: Segmented Control (iOS-style) */
.segmented-control-row {
  width: 100%;
}

.segmented-control {
  display: flex;
  padding: 2px;
  background: #f1f3f5;
  border-radius: 10px;
  gap: 4px;
}

.segment {
  flex: 1;
  padding: 8px 16px;
  background: transparent;
  border: none;
  border-radius: 8px;
  font-size: 14px;
  font-weight: 500;
  color: #64748b;
  cursor: pointer;
  transition: all 0.2s ease;
  -webkit-tap-highlight-color: transparent;
}

.segment:active {
  transform: scale(0.98);
}

.segment-active {
  background: white;
  color: #1e293b;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
  font-weight: 600;
}

.search-input-wrapper {
  position: relative;
  width: 100%;
  display: flex;
  align-items: center;
}

.search-icon {
  position: absolute;
  left: 12px;
  font-size: 16px;
  color: #94a3b8;
  pointer-events: none;
}

.search-input-mobile {
  width: 100%;
  padding: 10px 12px 10px 40px;
  background: #f8f9fa;
  border: 1px solid #e2e8f0;
  border-radius: 10px;
  font-size: 15px;
  color: #1e293b;
  outline: none;
  transition: all 0.2s;
  -webkit-appearance: none;
}

.search-input-mobile:focus {
  background: white;
  border-color: #667eea;
  box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
}

.search-input-mobile::placeholder {
  color: #94a3b8;
}

/* Row 2: Horizontal Scrolling Chips */
.chips-row {
  width: 100%;
  overflow-x: auto;
  overflow-y: hidden;
  -webkit-overflow-scrolling: touch;
  scrollbar-width: none; /* Firefox */
  -ms-overflow-style: none; /* IE/Edge */
}

.chips-row::-webkit-scrollbar {
  display: none; /* Chrome/Safari */
}

.chips-container {
  display: flex;
  gap: 8px;
  padding-bottom: 4px;
  white-space: nowrap;
  width: 100%;
}

/* Chips groups (categories or sources) */
.chips-group {
  display: flex;
  gap: 8px;
  white-space: nowrap;
  width: 100%;
}

/* Chip Styles (iOS-like) */
.chip {
  display: inline-flex;
  align-items: center;
  padding: 8px 16px;
  background: white;
  border: 1.5px solid #e2e8f0;
  border-radius: 20px;
  font-size: 14px;
  font-weight: 500;
  color: #64748b;
  cursor: pointer;
  transition: all 0.2s;
  flex-shrink: 0;
  -webkit-tap-highlight-color: transparent;
}

.chip:active {
  transform: scale(0.95);
}

/* Active chip (selected category) */
.chip-active {
  background: #667eea;
  color: white;
  border-color: #667eea;
}

/* Time filter chips */
.chip-time {
  min-width: 50px;
  justify-content: center;
}

.chip-time[aria-pressed="true"] {
  background: #667eea;
  color: white;
  border-color: #667eea;
}

/* Toggle chip (Hide Ads) */
.chip-toggle {
  background: #f8f9fa;
}

.chip-toggle[aria-pressed="true"] {
  background: #10b981;
  color: white;
  border-color: #10b981;
}

/* Separator */
.chip-separator {
  width: 1px;
  height: 24px;
  background: #e2e8f0;
  align-self: center;
  flex-shrink: 0;
}

/* Desktop: Show desktop layout, hide mobile */
@media (min-width: 769px) {
  .filters-mobile-stack {
    display: none;
  }

  .segmented-control-row {
    display: none;
  }

  .filters-desktop-inline {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 12px 16px;
  }
}

/* Tablet: Keep mobile layout but with more breathing room */
@media (min-width: 480px) and (max-width: 768px) {
  .search-input-mobile {
    padding: 12px 12px 12px 44px;
    font-size: 16px;
  }

  .chip {
    padding: 10px 18px;
    font-size: 15px;
  }
}
</style>
